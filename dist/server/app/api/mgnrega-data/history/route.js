(()=>{var t={};t.id=669,t.ids=[669],t.modules={3295:t=>{"use strict";t.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9046:(t,e,r)=>{"use strict";r.a(t,async(t,a)=>{try{r.r(e),r.d(e,{patchFetch:()=>c,routeModule:()=>l,serverHooks:()=>m,workAsyncStorage:()=>u,workUnitAsyncStorage:()=>p});var i=r(96559),n=r(48088),d=r(37719),s=r(18493),o=t([s]);s=(o.then?(await o)():o)[0];let l=new i.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/mgnrega-data/history/route",pathname:"/api/mgnrega-data/history",filename:"route",bundlePath:"app/api/mgnrega-data/history/route"},resolvedPagePath:"C:\\Users\\deshm\\Downloads\\mgnrega-district-dashboard-main\\mgnrega-district-dashboard-main\\src\\app\\api\\mgnrega-data\\history\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:u,workUnitAsyncStorage:p,serverHooks:m}=l;function c(){return(0,d.patchFetch)({workAsyncStorage:u,workUnitAsyncStorage:p})}a()}catch(t){a(t)}})},10846:t=>{"use strict";t.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},18493:(t,e,r)=>{"use strict";r.a(t,async(t,a)=>{try{r.r(e),r.d(e,{GET:()=>l});var i=r(32190),n=r(42154),d=r(57671),s=r(94634),o=r(16048),c=t([n]);async function l(t){try{let e=t.nextUrl.searchParams,r=e.get("district"),a=e.get("startDate"),c=e.get("endDate");if(!r)return i.NextResponse.json({error:"District code is required",code:"MISSING_DISTRICT_CODE"},{status:400});let l=await n.db.select().from(d.districts).where((0,s.eq)(d.districts.districtCode,r)).limit(1);if(0===l.length)return i.NextResponse.json({error:"District not found",code:"DISTRICT_NOT_FOUND"},{status:404});let u=l[0],p=[(0,s.eq)(d.districtPerformance.districtId,u.id)];a&&p.push((0,s.RO)(d.districtPerformance.dataDate,a)),c&&p.push((0,s.wJ)(d.districtPerformance.dataDate,c));let m=p.length>1?(0,s.Uo)(...p):p[0],N=await n.db.select().from(d.districtPerformance).where(m).orderBy((0,o.i)(d.districtPerformance.dataDate));return i.NextResponse.json({district:{id:u.id,districtCode:u.districtCode,districtNameEn:u.districtNameEn,districtNameHi:u.districtNameHi,stateName:u.stateName},history:N})}catch(t){return console.error("GET error:",t),i.NextResponse.json({error:"Internal server error: "+t.message},{status:500})}}n=(c.then?(await c)():c)[0],a()}catch(t){a(t)}})},28855:t=>{"use strict";t.exports=import("@libsql/client")},29294:t=>{"use strict";t.exports=require("next/dist/server/app-render/work-async-storage.external.js")},42154:(t,e,r)=>{"use strict";r.a(t,async(t,a)=>{try{r.d(e,{db:()=>c});var i=r(65817),n=r(28855),d=r(57671),s=t([n,i]);[n,i]=s.then?(await s)():s;let o=(0,n.createClient)({url:process.env.TURSO_CONNECTION_URL,authToken:process.env.TURSO_AUTH_TOKEN}),c=(0,i.f)(o,{schema:d});a()}catch(t){a(t)}})},44870:t=>{"use strict";t.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},57671:(t,e,r)=>{"use strict";r.r(e),r.d(e,{categoryBreakdown:()=>c,districtPerformance:()=>s,districts:()=>d,monthlyTrends:()=>o});var a=r(28234),i=r(70932),n=r(89283);let d=(0,a.D)("districts",{id:(0,i.nd)("id").primaryKey({autoIncrement:!0}),districtCode:(0,n.Qq)("district_code").notNull().unique(),districtNameEn:(0,n.Qq)("district_name_en").notNull(),districtNameHi:(0,n.Qq)("district_name_hi").notNull(),stateName:(0,n.Qq)("state_name").notNull(),createdAt:(0,n.Qq)("created_at").notNull(),updatedAt:(0,n.Qq)("updated_at").notNull()}),s=(0,a.D)("district_performance",{id:(0,i.nd)("id").primaryKey({autoIncrement:!0}),districtId:(0,i.nd)("district_id").notNull().references(()=>d.id),dataDate:(0,n.Qq)("data_date").notNull(),workCompleted:(0,i.nd)("work_completed").notNull(),fundsUtilizedPercentage:(0,i.nd)("funds_utilized_percentage").notNull(),activeWorkers:(0,i.nd)("active_workers").notNull(),averageWage:(0,i.nd)("average_wage").notNull(),workCompletionRate:(0,i.nd)("work_completion_rate").notNull(),fundUtilizationRate:(0,i.nd)("fund_utilization_rate").notNull(),workerParticipationRate:(0,i.nd)("worker_participation_rate").notNull(),targetWorks:(0,i.nd)("target_works").notNull(),achievementWorks:(0,i.nd)("achievement_works").notNull(),createdAt:(0,n.Qq)("created_at").notNull(),updatedAt:(0,n.Qq)("updated_at").notNull()}),o=(0,a.D)("monthly_trends",{id:(0,i.nd)("id").primaryKey({autoIncrement:!0}),districtId:(0,i.nd)("district_id").notNull().references(()=>d.id),month:(0,i.nd)("month").notNull(),year:(0,i.nd)("year").notNull(),workCompleted:(0,i.nd)("work_completed").notNull(),fundsUtilized:(0,i.nd)("funds_utilized").notNull(),activeWorkers:(0,i.nd)("active_workers").notNull(),createdAt:(0,n.Qq)("created_at").notNull()}),c=(0,a.D)("category_breakdown",{id:(0,i.nd)("id").primaryKey({autoIncrement:!0}),districtId:(0,i.nd)("district_id").notNull().references(()=>d.id),dataDate:(0,n.Qq)("data_date").notNull(),categoryName:(0,n.Qq)("category_name").notNull(),percentage:(0,i.nd)("percentage").notNull(),workCount:(0,i.nd)("work_count").notNull(),createdAt:(0,n.Qq)("created_at").notNull()})},63033:t=>{"use strict";t.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},96487:()=>{}};var e=require("../../../../webpack-runtime.js");e.C(t);var r=t=>e(e.s=t),a=e.X(0,[447,580,817],()=>r(9046));module.exports=a})();